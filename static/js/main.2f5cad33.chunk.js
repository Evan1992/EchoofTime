(this.webpackJsonpEchoofTime=this.webpackJsonpEchoofTime||[]).push([[0],{16:function(e,t,n){e.exports={tree_list:"Plan_tree_list__2tHAr",tree_item:"Plan_tree_item__22s6D",tree_row:"Plan_tree_row__2n25Y",plan_title:"Plan_plan_title__2im9m",plan_seconds:"Plan_plan_seconds__3jmBf",plan_date:"Plan_plan_date__4ws_Z",plan_left_button_img:"Plan_plan_left_button_img__Kff9T",plan_right_buttons:"Plan_plan_right_buttons__2V5YE",plan_clock_button:"Plan_plan_clock_button__kbv1p",plan_add_button:"Plan_plan_add_button__MuLNR",plan_left_button:"Plan_plan_left_button__256P2",check_icon:"Plan_check_icon__2yBlw",check_icon_img:"Plan_check_icon_img__2WoKh",plan_calendar:"Plan_plan_calendar__2MiEa",plan_calendar_icon:"Plan_plan_calendar_icon__2Rbua",placeholder:"Plan_placeholder__12Ei-"}},24:function(e,t,n){e.exports={auth:"AuthForm_auth__MPw6W",control:"AuthForm_control__2fVSU",actions:"AuthForm_actions__1VNhY",toggle:"AuthForm_toggle__21tnB"}},25:function(e,t,n){e.exports={input_time:"TimeRange_input_time__2cu_C"}},26:function(e,t,n){e.exports={plans:"Plans_plans__2xzzG",container:"Plans_container__3EDq0"}},29:function(e,t,n){e.exports={hint:"NewPlan_hint__3J7Bh",placeholder:"NewPlan_placeholder__14myg"}},33:function(e,t,n){e.exports={header:"MainNavigation_header__2lqQ1",logo:"MainNavigation_logo__1TgMx"}},49:function(e,t,n){e.exports={control:"NewPlanForm_control__92qW0",placeholder:"NewPlanForm_placeholder__DmNXA"}},50:function(e,t,n){e.exports={backdrop:"Backdrop_backdrop__1uHu4"}},51:function(e,t,n){e.exports={title:"TodayPlans_title__1oIBX"}},52:function(e,t,n){e.exports={starting:"StartingPageContent_starting__kwCvL"}},58:function(e,t,n){},85:function(e,t,n){"use strict";n.r(t);var a=n(2),s=n.n(a),c=n(46),o=n.n(c),l=(n(58),n(22)),i=n(4),r=n(18),d=n(0),u=s.a.createContext({token:"",isLoggedIn:!1,userID:"",login:function(e){},logout:function(){}}),h=function(e){var t=localStorage.getItem("token"),n=localStorage.getItem("userID"),s=Object(a.useState)(t),c=Object(r.a)(s,2),o=c[0],l=c[1],i=Object(a.useState)(n),h=Object(r.a)(i,2),_=h[0],p=h[1],j={token:o,isLoggedIn:!!o,userID:_,login:function(e,t){l(e),p(t),localStorage.setItem("token",e),localStorage.setItem("userID",t)},logout:function(){l(null),localStorage.removeItem("token")}};return Object(d.jsx)(u.Provider,{value:j,children:e.children})},_=u,p=n(33),j=n.n(p),g=function(){var e=Object(a.useContext)(_),t=e.isLoggedIn;return Object(d.jsxs)("header",{className:j.a.header,children:[Object(d.jsx)(l.b,{to:"/",children:Object(d.jsx)("div",{className:j.a.logo,children:" EchoOfTime "})}),Object(d.jsx)("nav",{children:Object(d.jsxs)("ul",{children:[!t&&Object(d.jsx)("li",{children:Object(d.jsx)(l.b,{to:"/auth",children:"Login"})}),t&&Object(d.jsx)("li",{children:Object(d.jsx)("button",{onClick:function(){e.logout()},children:"Logout"})})]})})]})},x=function(e){return Object(d.jsxs)(a.Fragment,{children:[Object(d.jsx)(g,{}),Object(d.jsx)("main",{children:e.children})]})},b=n(11),m=n(12),f=n(28),O=n(14),v=n(13),y=n(48),k=n.n(y).a.create({timeout:5e3,baseURL:"https://sound-of-time-default-rtdb.firebaseio.com"}),w=n(49),S=n.n(w),C=function(e){var t=Object(a.useRef)();return Object(d.jsxs)("div",{className:S.a.control,children:[Object(d.jsx)("input",{type:"text",ref:t}),Object(d.jsx)("button",{onClick:function(){var n={complete:!1,active:!0,title:t.current.value,comment:"",rank:e.rank?e.rank:0,parent:e.parent?e.parent:"",children:{},date:"",seconds:0};e.g_state.plans_element.addNewPlan(n),e.form_toggler()},children:"Add"}),Object(d.jsx)("button",{onClick:e.form_toggler,children:"Cancel"})]})},N=n(50),P=n.n(N),T=function(e){return Object(d.jsx)("div",{className:P.a.backdrop,onClick:e.onClick})},I=n(16),A=n.n(I),D=n(53),H=n(25),L=n.n(H),M=function(e){return Object(d.jsxs)("div",{className:L.a.input_frame,children:[Object(d.jsx)("input",{className:L.a.input_time,type:"number",onChange:e.plan.expectedHoursChangeHandler,value:e.plan.state.expected_hours}),":",Object(d.jsx)("input",{className:L.a.input_time,type:"number",onChange:e.plan.expectedMinutesChangeHandler,value:e.plan.state.expected_minutes}),":",Object(d.jsx)("input",{className:L.a.input_time,type:"number",onChange:e.plan.expectedSecondsChangeHandler,value:e.plan.state.expected_seconds})]})};function F(e){var t=e/3600>>0,n=R(e%3600/60>>0),a=R(e%60);return"".concat(t,":").concat(n,":").concat(a)}function R(e){return e<10?"0".concat(e):"".concat(e)}var E={0:"Jan",1:"Feb",2:"Mar",3:"Apr",4:"May",5:"Jun",6:"Jul",7:"Aug",8:"Sep",9:"Oct",10:"Nov",11:"Dec"};function U(e){if(""===e)return"";var t=new Date(e+"T00:00:00");return function(e){var t=new Date;return Y(e,t)}(t)?"today":E[t.getMonth()]+" "+t.getDate()}function Y(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}function B(e){var t=new Date;return Y(new Date(e+"T00:00:00"),t)}var J=function(e){Object(O.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={seconds:e.props.seconds?e.props.seconds:0},e.interval=null,e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){this.props.plan_component.timer=this}},{key:"componentWillReceiveProps",value:function(e){e.seconds!==this.state.seconds&&this.setState({seconds:e.seconds})}},{key:"render",value:function(){return Object(d.jsx)("div",{children:F(this.state.seconds)})}},{key:"tick",value:function(){this.setState({seconds:this.state.seconds+1})}},{key:"reset_timer",value:function(){console.log("Timer reset"),this.interval&&clearInterval(this.interval),this.setState({seconds:0})}},{key:"pause_timer",value:function(){console.log("Timer paused"),this.interval&&clearInterval(this.interval)}},{key:"set_seconds",value:function(e){this.setState({seconds:e})}},{key:"get_seconds",value:function(){return this.state.seconds}},{key:"start_timer",value:function(){var e=this;console.log("Timer started"),this.interval=setInterval((function(){return e.tick()}),1e3)}}]),n}(a.Component),Z=J,q=(n(27),n(17)),G=n(6),W=n(3),z=(n(84),function(e){Object(O.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={show_form:!1,show_children:!0,show_calendar:!1,plan_date:"",expected_hours:0,expected_minutes:0,expected_seconds:0},e.g_state=e.props.g_state,e.id=e.props.id,e.timer=null,e.formToggleHandler=function(){e.setState({show_form:!e.state.show_form})},e.childrenToggleHandler=function(){e.setState({show_children:!e.state.show_children})},e.clockToggleHandler=function(){var t=Math.floor(Date.now()/1e3);if(e.g_state.plan_in_progress){console.log("End current timer.");var n=t-e.g_state.plan_start_timestamp;e.g_state.timer.reset_timer(),e.updatePlanTimer(e.g_state.plan_in_progress,n)}e.g_state.plan_in_progress===e.id?e.g_state.plans_element.updateGState("plan_in_progress",""):(console.log("Start new timer."),e.g_state.plans_element.updateGState("plan_in_progress",e.id),e.g_state.plans_element.updateGState("plan_start_timestamp",t),e.g_state.timer.start_timer(),e.startTimerRecursively(e.id)),e.g_state.plans_element.updateTrigger()},e.calendarToggleHandler=function(){e.setState({show_calendar:!e.state.show_calendar})},e.updatePlanTimer=function(t,n){for(console.log("Update plans.");t;){if(!e.g_state.plans[t])break;var a=e.g_state.plan_components[t];a&&a.timer&&a.timer.pause_timer();var s=e.g_state.plans[t].seconds+n;e.g_state.plans_element.updatePlanAttr(t,"seconds",s),t=e.g_state.plans[t].parent}},e.dateChangeHandler=function(t){e.g_state.plans_element.updatePlanAttr(e.id,"date",t.toISOString().slice(0,10)),e.g_state.plans_element.updateTrigger()},e.completeHandler=function(){e.g_state.plans_element.updatePlanAttr(e.id,"complete",!0),e.g_state.plans_element.updateTrigger()},e.expectedHoursChangeHandler=function(t){e.setState({expected_hours:t.target.value});var n=3600*t.target.value+60*e.state.expected_minutes+e.state.expected_seconds;e.g_state.plans_element.updatePlanAttr(e.id,"expected_seconds",n)},e.expectedMinutesChangeHandler=function(t){e.setState({expected_minutes:t.target.value});var n=3600*e.state.expected_hours+60*t.target.value+e.state.expected_seconds;e.g_state.plans_element.updatePlanAttr(e.id,"expected_seconds",n)},e.expectedSecondsChangeHandler=function(t){e.setState({expected_seconds:t.target.value});var n=3600*e.state.expected_hours+60*e.state.expected_minutes+t.target.value;e.g_state.plans_element.updatePlanAttr(e.id,"expected_seconds",n)},e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){this.g_state.plan_components[this.id]=this;var e=this.g_state.plans[this.id];if(e){e.expected_seconds||(e.expected_seconds=0);var t=e.expected_seconds;this.setState({expected_hours:t/3600>>0,expected_minutes:t%3600/60>>0,expected_seconds:t%60})}}},{key:"render",value:function(){var e=this,t=this.g_state.plans[this.id];return t?t.complete?null:Object(d.jsxs)(s.a.Fragment,{children:[Object(d.jsxs)(G.a,{children:[Object(d.jsx)(W.a,{xs:1}),Object(d.jsx)(W.a,{xs:"auto",children:Object(d.jsx)("div",{className:A.a.plan_left_button,onClick:this.childrenToggleHandler,children:t.children&&Object.keys(t.children).length>0&&(this.state.show_children?Object(d.jsx)("img",{className:A.a.plan_left_button_img,src:"shrink.png",alt:""}):Object(d.jsx)("img",{className:A.a.plan_left_button_img,src:"expand.png",alt:""}))})}),Object(d.jsx)(W.a,{xs:{span:3},style:{display:"flex",justifyContent:"left"},children:Object(d.jsx)("div",{style:{"text-indent":"calc(".concat(t.rank," * 20px)")},children:t.title||"No title"})}),Object(d.jsx)(W.a,{xs:2,children:Object(d.jsx)(M,{plan:this})}),Object(d.jsx)(W.a,{xs:2,children:Object(d.jsx)(Z,{seconds:t.seconds,plan_component:this})}),Object(d.jsx)(W.a,{xs:1,children:Object(d.jsx)("div",{className:A.a.plan_date,children:null!=t.date?U(t.date):""})}),Object(d.jsxs)(W.a,{xs:"auto",style:{padding:0},children:[Object(d.jsx)("img",{className:A.a.plan_calendar_icon,onClick:this.calendarToggleHandler,src:"https://img.icons8.com/windows/32/000000/calendar.png"}),this.state.show_calendar&&Object(d.jsxs)(s.a.Fragment,{children:[Object(d.jsx)(T,{onClick:this.calendarToggleHandler}),Object(d.jsx)("div",{className:A.a.plan_calendar,children:Object(d.jsx)(D.a,{onChange:this.dateChangeHandler})})]})]}),Object(d.jsx)(W.a,{xs:"auto",style:{padding:0},children:Object(d.jsx)("img",{className:A.a.plan_clock_button,onClick:this.clockToggleHandler,src:"https://img.icons8.com/ios-glyphs/30/000000/--pocket-watch.png",alt:""})}),Object(d.jsx)(W.a,{xs:"auto",style:{padding:0},children:Object(d.jsx)("div",{className:A.a.plan_add_button,onClick:this.formToggleHandler,children:"+"})}),Object(d.jsx)(W.a,{xs:"auto",children:Object(d.jsx)("div",{className:A.a.check_icon,onClick:this.completeHandler,children:Object(d.jsx)("img",{className:A.a.check_icon_img,src:"https://img.icons8.com/ios/50/000000/checked-checkbox--v1.png",alt:""})})})]}),Object(d.jsx)(G.a,{children:this.state.show_form&&Object(d.jsx)(q.a,{fluid:!0,children:Object(d.jsxs)(G.a,{children:[Object(d.jsx)(W.a,{xs:1}),Object(d.jsx)(W.a,{xs:"auto",children:Object(d.jsx)("div",{style:{width:"calc(20px + ".concat(t.rank," * 20px)")}})}),Object(d.jsx)(W.a,{xs:{span:5},style:{display:"flex",justifyContent:"left"},children:Object(d.jsx)(C,{form_toggler:this.formToggleHandler,parent:this.id,rank:t.rank+1,g_state:this.props.g_state})})]})})}),this.state.show_children&&t.children&&Object.keys(t.children).map((function(t){return Object(d.jsx)(n,{className:A.a.child_task,g_state:e.g_state,id:t},t)}))]}):null}},{key:"startTimerRecursively",value:function(e){for(;e;){var t=this.g_state.plan_components[e];if(!t)break;t.timer&&t.timer.start_timer(),e=this.g_state.plans[e].parent}}}]),n}(a.Component)),K=z,Q=n(29),V=n.n(Q),X=function(e){Object(O.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={show_form:!1},e.formToggleHandler=function(){e.setState({show_form:!e.state.show_form})},e}return Object(m.a)(n,[{key:"render",value:function(){return this.state.show_form?Object(d.jsx)(q.a,{fluid:!0,children:Object(d.jsxs)(G.a,{children:[Object(d.jsx)(W.a,{xs:1}),Object(d.jsx)(W.a,{xs:"auto",children:Object(d.jsx)("div",{className:V.a.placeholder})}),Object(d.jsx)(W.a,{xs:{span:5},style:{display:"flex",justifyContent:"left"},children:Object(d.jsx)(C,{form_toggler:this.formToggleHandler,parent:this.props.root_id,rank:this.props.rank,g_state:this.props.g_state})})]})}):Object(d.jsx)(q.a,{fluid:!0,children:Object(d.jsxs)(G.a,{children:[Object(d.jsx)(W.a,{xs:1}),Object(d.jsx)(W.a,{xs:"auto",children:Object(d.jsx)("div",{className:V.a.placeholder})}),Object(d.jsx)(W.a,{xs:{span:3},style:{display:"flex",justifyContent:"left"},children:Object(d.jsx)("div",{className:V.a.hint,onClick:this.formToggleHandler,children:"Click here to add a task"})})]})})}}]),n}(a.Component),$=X,ee=function(e){Object(O.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={seconds:0,plan_title:"NULL"},e.interval=null,e.plan_title="",e.g_state=e.props.g_state,e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){this.props.g_state.timer=this}},{key:"render",value:function(){return Object(d.jsxs)("div",{children:[Object(d.jsxs)(G.a,{children:[Object(d.jsx)(W.a,{xs:1}),Object(d.jsx)(W.a,{xs:"auto",children:Object(d.jsx)("div",{style:{width:"20px"}})}),Object(d.jsxs)(W.a,{children:["Current Plan: ",this.state.plan_title]})]}),Object(d.jsxs)(G.a,{children:[Object(d.jsx)(W.a,{xs:1}),Object(d.jsx)(W.a,{xs:"auto",children:Object(d.jsx)("div",{style:{width:"20px"}})}),Object(d.jsxs)(W.a,{children:["New Time: ",F(this.state.seconds)]})]})]})}},{key:"tick",value:function(){this.setState({seconds:this.state.seconds+1})}},{key:"reset_timer",value:function(){console.log("Timer reset"),this.interval&&clearInterval(this.interval),this.setState({seconds:0,plan_title:"NULL"})}},{key:"pause_timer",value:function(){console.log("Timer reset"),this.interval&&clearInterval(this.interval)}},{key:"set_timer",value:function(e){this.setState({seconds:e})}},{key:"get_seconds",value:function(){return this.state.seconds}},{key:"start_timer",value:function(){var e=this;console.log("Timer start");var t=this.g_state.plan_in_progress,n=this.g_state.plans[t].title;this.setState({plan_title:n}),this.interval=setInterval((function(){return e.tick()}),1e3)}}]),n}(a.Component),te=ee,ne=n(51),ae=n.n(ne),se=function(e){Object(O.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={expected_seconds:0,logged_seconds:0},e.g_state=e.props.g_state,e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return this.init_today_plans(),console.log("logged_seconds is: ",this.state.logged_seconds),Object(d.jsxs)("div",{children:[Object(d.jsxs)(G.a,{children:[Object(d.jsx)(W.a,{xs:1}),Object(d.jsx)(W.a,{xs:"auto",children:Object(d.jsx)("div",{style:{width:"20px"}})}),Object(d.jsx)(W.a,{className:ae.a.title,children:"Today"})]}),Object(d.jsxs)(G.a,{children:[Object(d.jsx)(W.a,{xs:1}),Object(d.jsx)(W.a,{xs:"auto",children:Object(d.jsx)("div",{style:{width:"20px"}})}),Object(d.jsxs)(W.a,{xs:"auto",children:["Estimated Time: ",F(this.state.expected_seconds)]})]}),Object(d.jsxs)(G.a,{children:[Object(d.jsx)(W.a,{xs:1}),Object(d.jsx)(W.a,{xs:"auto",children:Object(d.jsx)("div",{style:{width:"20px"}})}),Object(d.jsxs)(W.a,{xs:"auto",children:["Used Time: ",F(this.state.logged_seconds)]})]}),Object(d.jsxs)(G.a,{children:[Object(d.jsx)(W.a,{xs:1}),Object(d.jsx)(W.a,{xs:"auto",children:Object(d.jsx)("div",{style:{width:"20px"}})}),Object(d.jsxs)(W.a,{xs:"auto",children:["Still Need: ",F(this.state.expected_seconds-this.state.logged_seconds)]})]}),Object.keys(this.g_state.today_plans).map((function(t){return Object(d.jsxs)(G.a,{children:[Object(d.jsx)(W.a,{xs:1}),Object(d.jsx)(W.a,{xs:"auto",children:Object(d.jsx)("div",{style:{width:"30px"}})}),Object(d.jsx)(W.a,{xs:1,children:e.g_state.plans[t].title})]},t)}))]})}},{key:"dfs",value:function(e,t){var n=this.g_state.plans[t];if(n&&!n.complete)if(n.date&&B(n.date))e[t]=!0;else if(n.child_id)for(var a=0,s=Object.keys(n.children);a<s.length;a++){var c=s[a];this.dfs(e,c)}}},{key:"init_today_plans",value:function(){var e=0;this.g_state.today_plans={};for(var t=0,n=Object.entries(this.g_state.plans);t<n.length;t++){var a=Object(r.a)(n[t],2),s=a[0],c=a[1];c&&c.date&&B(c.date)&&!c.complete&&(this.g_state.today_plans[s]=!0,c.expected_seconds&&(e+=c.expected_seconds))}this.state.expected_seconds=e,this.update_logged_seconds()}},{key:"update_logged_seconds",value:function(){for(var e=0,t=0,n=Object.keys(this.g_state.today_plans);t<n.length;t++){var a=n[t];e+=this.g_state.plans[a].seconds}this.state.logged_seconds=e}}]),n}(a.Component),ce=se,oe=n(26),le=n.n(oe),ie=function(e){Object(O.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={isLoading:!0,update:!0},e.g_state={today_plans:{},plan_components:{},plan_in_progress:null,plan_start_timestamp:0,plans_element:Object(f.a)(e),timer:"",plan_promise:null},e.root_id="root_plan",e.user_path=e.context.userID,e.root_plan={children:{},seconds:0,rank:-1},e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.g_state.plan_promise=k.get("".concat(this.user_path,"/plans.json")),this.g_state.plan_promise.then((function(t){if(null!=t.data){console.log(t),e.g_state.plans=t.data;var n=e.g_state.plans[e.root_id];n?e.root_plan=n:e.addRootPlan(),e.setState({isLoading:!1})}else e.addRootPlan()})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this;return Object(d.jsxs)("div",{className:le.a.plans,children:[Object(d.jsx)(q.a,{fluid:!0,className:le.a.container,children:Object(d.jsx)(te,{g_state:this.g_state})}),Object(d.jsx)(q.a,{fluid:!0,className:le.a.container,children:this.root_plan.children&&Object.keys(this.root_plan.children).map((function(t){return Object(d.jsx)(K,{g_state:e.g_state,id:t},t)}))}),Object(d.jsx)($,{g_state:this.g_state,rank:0,root_id:this.root_id}),Object(d.jsx)(q.a,{fluid:!0,className:le.a.container,children:this.g_state.plans&&Object(d.jsx)(ce,{g_state:this.g_state})})]})}},{key:"updateTrigger",value:function(){this.setState({update:!0})}},{key:"updateGState",value:function(e,t){console.log("Update global value ".concat(e," = ").concat(t)),this.g_state[e]=t,this.putDatabase("".concat(this.user_path,"/g_state/").concat(e,".json"),t)}},{key:"updatePlanAttr",value:function(e,t,n){this.g_state.plans[e][t]=n,this.putDatabase("".concat(this.user_path,"/plans/").concat(e,"/").concat(t,".json"),n)}},{key:"updateExpectedSecond",value:function(e,t){var n=this.g_state.plans[e];n.expected_seconds||(n.expected_seconds=0),this.updatePlanAttr(e,"expected_seconds",n.expected_seconds+t)}},{key:"putDatabase",value:function(e,t){this.isString(t)&&(t='"'.concat(t,'"')),k.put(e,t).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}},{key:"addPlanChild",value:function(e,t){console.log("".concat(e," add children ").concat(t));var n=this.g_state.plans[e];n.children||(n.children={}),n.children[t]=!0,k.put("".concat(this.user_path,"/plans/").concat(e,"/children/").concat(t,".json"),!0).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}},{key:"addNewPlan",value:function(e){var t=this;k.post("".concat(this.user_path,"/plans.json"),e).then((function(n){console.log(n);var a=n.data.name;t.g_state.plans[a]=e,e.parent&&t.addPlanChild(e.parent,a),t.updateTrigger()})).catch((function(e){console.log(e)}))}},{key:"addRootPlan",value:function(){k.put("".concat(this.user_path,"/plans/").concat(this.root_id,".json"),this.root_plan).then((function(e){console.log("New root plan")})).catch((function(e){console.log(e)}))}},{key:"isString",value:function(e){return"string"===typeof e||e instanceof String}}]),n}(a.Component);ie.contextType=_;var re=ie,de=n(52),ue=n.n(de),he=function(){Object(a.useContext)(_).isLoggedIn;return Object(d.jsx)("section",{className:ue.a.starting,children:Object(d.jsx)("h1",{children:" Login to Start "})})},_e=function(){return Object(d.jsx)(he,{})},pe=n(24),je=n.n(pe),ge=function(e){var t=Object(i.g)(),n=Object(a.useRef)(),s=Object(a.useRef)(),c=Object(a.useContext)(_),o=Object(a.useState)(!0),l=Object(r.a)(o,2),u=l[0],h=l[1],p=Object(a.useState)(!1),j=Object(r.a)(p,2),g=j[0],x=j[1];return Object(d.jsxs)("section",{className:je.a.auth,children:[Object(d.jsx)("h1",{children:u?"Login":"Sign Up"}),Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault();var a,o=n.current.value,l=s.current.value;x(!0),a=u?"https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyCIl4ZZYuS6wAi1fKyItcok6vtZTNOSlQU":"https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyCIl4ZZYuS6wAi1fKyItcok6vtZTNOSlQU",fetch(a,{method:"POST",body:JSON.stringify({email:o,password:l,returnSecureToken:!0}),headers:{"Content-Type":"application/json"}}).then((function(e){return x(!1),e.ok?e.json():e.json().then((function(e){var t="Authentication failed!";throw e&&e.error&&e.error.message&&(t=e.error.message),new Error(t)}))})).then((function(e){c.login(e.idToken,e.localId),t.replace("/plans")})).catch((function(e){alert(e.message)}))},children:[Object(d.jsxs)("div",{className:je.a.control,children:[Object(d.jsx)("label",{htmlFor:"email",children:"Your email"}),Object(d.jsx)("input",{type:"email",id:"email",required:!0,ref:n})]}),Object(d.jsxs)("div",{className:je.a.control,children:[Object(d.jsx)("label",{htmlFor:"password",children:"Your Password"}),Object(d.jsx)("input",{type:"password",id:"password",required:!0,ref:s})]}),Object(d.jsxs)("div",{className:je.a.actions,children:[!g&&Object(d.jsx)("button",{children:u?"Login":"Create Account"}),g&&Object(d.jsx)("p",{children:"Sending request..."}),Object(d.jsx)("button",{type:"button",className:je.a.toggle,onClick:function(){h((function(e){return!e}))},children:u?"Create new account":"Login with existing account"})]})]})]})},xe=function(){return Object(d.jsx)(ge,{})};var be=function(){var e=Object(a.useContext)(_).isLoggedIn;return Object(d.jsx)(l.a,{children:Object(d.jsx)(x,{children:Object(d.jsxs)(i.d,{children:[!e&&Object(d.jsx)(i.b,{path:"/",exact:!0,children:Object(d.jsx)(_e,{})}),!e&&Object(d.jsx)(i.b,{path:"/auth",children:Object(d.jsx)(xe,{})}),e&&Object(d.jsx)(i.b,{path:"/plans",children:Object(d.jsx)("div",{className:"App",children:Object(d.jsx)(re,{})})}),Object(d.jsx)(i.b,{path:"*",children:Object(d.jsx)(i.a,{to:"/"})})]})})})},me=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,86)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),s(e),c(e),o(e)}))};o.a.render(Object(d.jsx)(s.a.StrictMode,{children:Object(d.jsx)(h,{children:Object(d.jsx)(be,{})})}),document.getElementById("root")),me()}},[[85,1,2]]]);
//# sourceMappingURL=main.2f5cad33.chunk.js.map